@model Tienda.Models.Categoria

@{
    ViewData["Title"] = "Eliminar Categoría";
var tieneProductos = ViewBag.TieneProductos ?? false;
var cantidadProductos = ViewBag.CantidadProductos ?? 0;
}

<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
   <div class="card aura-dark-card">
      <div class="card-header bg-danger text-white">
    <h3 class="mb-0">
      <i class="bi bi-exclamation-triangle"></i> Eliminar Categoría
  </h3>
     </div>
   <div class="card-body">
      <h5 class="text-light mb-4">¿Está seguro que desea eliminar esta categoría?</h5>
      
    @if (tieneProductos)
        {
     <div class="alert alert-danger">
   <i class="bi bi-x-circle-fill"></i>
    <strong>¡Atención!</strong> Esta categoría tiene <strong>@cantidadProductos producto(s)</strong> asociado(s).
  <br/>
 <strong>No se puede eliminar una categoría con productos asociados.</strong>
           <br/>
   Por favor, elimine o reasigne los productos antes de eliminar esta categoría.
       </div>
   }
       else
       {
    <div class="alert alert-warning">
        <i class="bi bi-info-circle"></i>
  Esta acción no se puede deshacer. La categoría será eliminada permanentemente.
      </div>
        }

   <div class="p-4 rounded bg-dark mb-4">
         <dl class="row mb-0">
       <dt class="col-sm-4 text-muted">Nombre:</dt>
     <dd class="col-sm-8 text-light fw-bold">@Html.DisplayFor(model => model.Nombre)</dd>
    
    <dt class="col-sm-4 text-muted">ID:</dt>
   <dd class="col-sm-8 text-light">@Html.DisplayFor(model => model.CategoriaId)</dd>
  
  @if (tieneProductos)
       {
   <dt class="col-sm-4 text-muted">Productos:</dt>
   <dd class="col-sm-8 text-light">
        @cantidadProductos producto(s) asociado(s)
       <a asp-controller="Productoes" asp-action="Index" class="btn btn-sm btn-info ms-2">
    <i class="bi bi-box-seam"></i> Ver Productos
       </a>
 </dd>
    }
         </dl>
              </div>

     <div class="d-flex gap-2">
           @if (!tieneProductos)
    {
   <form asp-action="Delete" method="post" class="flex-grow-1">
      <input type="hidden" asp-for="CategoriaId" />
       <button type="submit" class="btn btn-danger w-100" onclick="return confirm('¿Está completamente seguro de eliminar esta categoría?');">
   <i class="bi bi-trash"></i> Sí, Eliminar
   </button>
 </form>
  }
      <a asp-action="Index" class="btn btn-outline-secondary flex-grow-1">
    <i class="bi bi-arrow-left"></i> Cancelar
        </a>
    </div>
  </div>
   </div>
        </div>
    </div>
</div>

@section Styles {
    <style>
 .aura-dark-card {
       background-color: #2a2a3e;
       border: 1px solid rgba(0, 188, 212, 0.3);
border-radius: 12px;
   overflow: hidden;
      }

        .aura-dark-card .card-body {
  color: #f1f1f1;
        }
  </style>
}
